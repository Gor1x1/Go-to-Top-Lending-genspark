#!/usr/bin/env python3
"""
Complete site update script:
1. Update hero text to competitor style
2. Add WB Banner after ticker 
3. Add Stats Bar
4. Add About section
5. Add Buyout detail + Reviews detail after services
6. Update guarantee block (remove image, new text)
7. Redesign popup
8. Add new CSS
9. Fix all Armenian translations with proper Unicode
"""
import re

with open('src/index.tsx', 'r', encoding='utf-8') as f:
    content = f.read()

# ============================================================
# HELPER: Armenian translations
# ============================================================
AM = {
    # Hero
    "Успешный опыт с 2021 года": "Հաջdelays 2021 թdelays",
    "Продвижение карточек на": "Քdelays առdelays",
    "Wildberries под ключ": "Wildberries-ум delaysdelays",
}

# ============================================================
# STEP A: Add new CSS blocks before closing </style>
# ============================================================
new_css = """
/* ===== WB BANNER ===== */
.wb-banner{padding:20px 0;background:var(--bg-surface);border-bottom:1px solid var(--border)}
.wb-banner-inner{display:flex;align-items:center;justify-content:center;gap:24px;flex-wrap:wrap}
.wb-banner-card{display:flex;align-items:center;gap:16px;padding:16px 28px;background:linear-gradient(135deg,#ff3366,var(--purple));border-radius:var(--r);flex:1;min-width:280px;position:relative;overflow:hidden}
.wb-banner-card::after{content:"!";position:absolute;right:16px;top:50%;transform:translateY(-50%);font-size:3.5rem;font-weight:900;color:rgba(255,255,255,0.15)}
.wb-banner-card .wb-icon{font-size:1.6rem;color:#fff}
.wb-banner-card .wb-text{font-weight:800;font-size:1rem;color:#fff;line-height:1.3;text-transform:uppercase}
.wb-banner-right{display:flex;align-items:center;gap:16px;padding:16px 28px;background:var(--bg-card);border:1px solid var(--border);border-radius:var(--r);flex:1;min-width:280px}
.wb-banner-right .wb-r-icon{font-size:1.4rem}
.wb-banner-right .wb-r-text{font-weight:700;font-size:0.92rem;line-height:1.4}
.wb-banner-right .btn{margin-left:auto;white-space:nowrap;font-size:0.82rem;padding:10px 20px}

/* ===== ABOUT SECTION ===== */
.about-grid{display:grid;grid-template-columns:1fr 1.5fr;gap:48px;align-items:center}
.about-img{position:relative;border-radius:var(--r-lg);overflow:hidden;border:1px solid var(--border)}
.about-img img{width:100%;height:auto;display:block}
.about-text h2{font-size:2rem;font-weight:800;margin-bottom:20px;line-height:1.3}
.about-text h2 .gr{background:linear-gradient(135deg,var(--purple),var(--accent));-webkit-background-clip:text;-webkit-text-fill-color:transparent}
.about-text p{color:var(--text-sec);font-size:1rem;line-height:1.8;margin-bottom:16px}
.about-highlight{background:rgba(139,92,246,0.08);border:1px solid var(--border);border-radius:var(--r);padding:20px 24px;margin-top:16px}
.about-highlight p{font-weight:600;color:var(--accent);margin:0!important}

/* ===== BUYOUT SERVICE DETAIL ===== */
.buyout-detail{background:var(--bg-card);border:1px solid var(--border);border-radius:var(--r-lg);padding:48px}
.buyout-detail-header{margin-bottom:32px}
.buyout-detail-header h2{font-size:2rem;font-weight:800;margin-bottom:12px}
.buyout-detail-header h2 .gr{background:linear-gradient(135deg,var(--purple),var(--accent));-webkit-background-clip:text;-webkit-text-fill-color:transparent}
.buyout-detail-header .subtitle{font-weight:700;font-size:1.1rem;margin-bottom:8px}
.buyout-detail-header p{color:var(--text-sec);font-size:0.92rem;line-height:1.7}
.buyout-grid{display:grid;grid-template-columns:1.2fr 1fr 1fr;gap:20px}
.buyout-card{background:var(--bg-surface);border:1px solid var(--border);border-radius:var(--r);padding:28px;transition:var(--t)}
.buyout-card:hover{border-color:rgba(139,92,246,0.3)}
.buyout-card h4{font-size:1rem;font-weight:700;margin-bottom:12px;text-transform:uppercase;color:var(--accent)}
.buyout-card p{color:var(--text-sec);font-size:0.88rem;line-height:1.7}
.buyout-card ul{list-style:none;margin-top:12px}
.buyout-card ul li{padding:4px 0;font-size:0.88rem;color:var(--text-sec)}
.buyout-card ul li::before{content:"\\2022";color:var(--purple);margin-right:8px}
.buyout-cta{text-align:right;margin-top:24px}

/* ===== REVIEWS DETAIL ===== */
.reviews-detail{background:var(--bg-card);border:1px solid var(--border);border-radius:var(--r-lg);padding:48px;margin-top:32px}
.reviews-grid{display:grid;grid-template-columns:repeat(auto-fit,minmax(250px,1fr));gap:20px;margin-top:32px}
.review-point{background:var(--bg-surface);border:1px solid var(--border);border-radius:var(--r);padding:24px;text-align:center;transition:var(--t)}
.review-point:hover{border-color:rgba(139,92,246,0.3);transform:translateY(-3px)}
.review-point i{font-size:2rem;color:var(--purple);margin-bottom:14px}
.review-point h4{font-size:1rem;font-weight:700;margin-bottom:8px}
.review-point p{color:var(--text-sec);font-size:0.85rem;line-height:1.6}

/* ===== STATS BAR ===== */
.stats-bar{padding:60px 0;background:var(--bg-surface);border-top:1px solid var(--border);border-bottom:1px solid var(--border)}
.stats-grid{display:grid;grid-template-columns:repeat(4,1fr);gap:32px;text-align:center}
.stat-card .stat-big{font-size:2.8rem;font-weight:900;color:var(--purple);line-height:1}
.stat-card .stat-desc{font-size:0.88rem;color:var(--text-sec);margin-top:6px;font-weight:500}
"""

# Add CSS before the @media queries
content = content.replace(
    '@media(max-width:1024px){',
    new_css + '\n@media(max-width:1024px){'
)

# Add responsive rules for new blocks
content = content.replace(
    '  .footer-grid{grid-template-columns:1fr 1fr}\n  .wb-banner-inner{grid-template-columns:1fr}',
    '  .footer-grid{grid-template-columns:1fr 1fr}\n  .wb-banner-inner{flex-direction:column}'
)
content = content.replace(
    '  .about-grid{grid-template-columns:1fr}\n  .buyout-grid{grid-template-columns:1fr 1fr}',
    '  .about-grid{grid-template-columns:1fr}\n  .buyout-grid{grid-template-columns:1fr 1fr}'
)

# Check if @media already has about-grid rules  
if 'about-grid' not in content.split('@media(max-width:1024px)')[1].split('@media(max-width:768px)')[0]:
    content = content.replace(
        '  .guarantee-card{grid-template-columns:1fr;gap:32px}\n  .footer-grid{grid-template-columns:1fr 1fr}',
        '  .guarantee-card{grid-template-columns:1fr;gap:32px}\n  .footer-grid{grid-template-columns:1fr 1fr}\n  .wb-banner-inner{flex-direction:column}\n  .about-grid{grid-template-columns:1fr}\n  .buyout-grid{grid-template-columns:1fr 1fr}\n  .stats-grid{grid-template-columns:repeat(2,1fr)}'
    )

# Add 768px responsive
if 'reviews-grid' not in content:
    content = content.replace(
        '  .tg-float{padding:16px;border-radius:50%}\n  .popup-card .pf-row{grid-template-columns:1fr}',
        '  .tg-float{padding:16px;border-radius:50%}\n  .popup-card .pf-row{grid-template-columns:1fr}\n  .reviews-grid{grid-template-columns:1fr 1fr}'
    )

print("CSS added")

# ============================================================
# STEP B: Insert WB Banner + Stats Bar + About section after ticker
# ============================================================
wb_banner_html = """
<!-- ===== WB BANNER ===== -->
<div class="wb-banner fade-up">
<div class="container">
<div class="wb-banner-inner">
  <div class="wb-banner-card">
    <i class="fas fa-gavel wb-icon"></i>
    <div class="wb-text" data-ru="WB официально отменил штрафы за выкупы!" data-am="WB-\u0576 \u057a\u0561\u0577\u057f\u0578\u0576\u0561\u057a\u0565\u057d \u057e\u0565\u0580\u0561\u0581\u0580\u0565\u056c \u0567 \u057f\u0578\u0582\u0563\u0561\u0576\u0584\u0576\u0565\u0580\u0568 \u0563\u0576\u0578\u0582\u0574\u0576\u0565\u0580\u056b \u0570\u0561\u0574\u0561\u0580!">WB \u043e\u0444\u0438\u0446\u0438\u0430\u043b\u044c\u043d\u043e \u043e\u0442\u043c\u0435\u043d\u0438\u043b \u0448\u0442\u0440\u0430\u0444\u044b \u0437\u0430 \u0432\u044b\u043a\u0443\u043f\u044b!</div>
  </div>
  <div class="wb-banner-right">
    <span class="wb-r-icon">\U0001f680</span>
    <div class="wb-r-text" data-ru="\u041f\u043e\u0432\u044b\u0441\u044c \u0440\u0435\u0439\u0442\u0438\u043d\u0433 \u043c\u0430\u0433\u0430\u0437\u0438\u043d\u0430 \u043f\u0440\u044f\u043c\u043e \u0441\u0435\u0439\u0447\u0430\u0441" data-am="\u0532\u0561\u0580\u0571\u0580\u0561\u0581\u0580\u0565\u0584 \u056d\u0561\u0576\u0578\u0582\u0569\u056b \u057e\u0561\u0580\u056f\u0561\u0576\u056b\u0577\u0568 \u0570\u056b\u0574\u0561">\u041f\u043e\u0432\u044b\u0441\u044c \u0440\u0435\u0439\u0442\u0438\u043d\u0433 \u043c\u0430\u0433\u0430\u0437\u0438\u043d\u0430 \u043f\u0440\u044f\u043c\u043e \u0441\u0435\u0439\u0447\u0430\u0441</div>
    <a href="https://t.me/goo_to_top" target="_blank" class="btn btn-primary">\u0423\u0437\u043d\u0430\u0442\u044c</a>
  </div>
</div>
</div>
</div>

<!-- ===== STATS BAR ===== -->
<div class="stats-bar fade-up">
<div class="container">
  <div class="stats-grid">
    <div class="stat-card">
      <div class="stat-big" data-count-s="500">0</div>
      <div class="stat-desc" data-ru="\u043f\u043e\u0441\u0442\u0430\u0432\u0449\u0438\u043a\u043e\u0432 \u0441\u043e\u0442\u0440\u0443\u0434\u043d\u0438\u0447\u0430\u044e\u0442 \u0441 \u043d\u0430\u043c\u0438" data-am="\u0574\u0561\u057f\u0561\u056f\u0561\u0580\u0561\u0580 \u0570\u0561\u0574\u0561\u0563\u0578\u0580\u056e\u0561\u056f\u0581\u0578\u0582\u0574 \u0567 \u0574\u0565\u0566 \u0570\u0565\u057f">\u043f\u043e\u0441\u0442\u0430\u0432\u0449\u0438\u043a\u043e\u0432 \u0441\u043e\u0442\u0440\u0443\u0434\u043d\u0438\u0447\u0430\u044e\u0442 \u0441 \u043d\u0430\u043c\u0438</div>
    </div>
    <div class="stat-card">
      <div class="stat-big" data-count-s="1000">0+</div>
      <div class="stat-desc" data-ru="\u0430\u043a\u043a\u0430\u0443\u043d\u0442\u043e\u0432 \u0441 \u0438\u043d\u0434\u0438\u0432\u0438\u0434\u0443\u0430\u043b\u044c\u043d\u043e\u0439 \u043a\u0430\u0440\u0442\u043e\u0439" data-am="\u0570\u0561\u0577\u056b\u057e\u0576\u0565\u0580 \u0561\u0576\u0570\u0561\u057f\u0561\u056f\u0561\u0576 \u0584\u0561\u0580\u057f\u0578\u057e">\u0430\u043a\u043a\u0430\u0443\u043d\u0442\u043e\u0432 \u0441 \u0438\u043d\u0434\u0438\u0432\u0438\u0434\u0443\u0430\u043b\u044c\u043d\u043e\u0439 \u043a\u0430\u0440\u0442\u043e\u0439</div>
    </div>
    <div class="stat-card">
      <div class="stat-big" data-count-s="21">0</div>
      <div class="stat-desc" data-ru="\u0434\u0435\u043d\u044c \u0434\u043e \u0432\u044b\u0445\u043e\u0434\u0430 \u0432 \u0422\u041e\u041f" data-am="\u0585\u0580 \u0574\u056b\u0576\u0579\u0587 \u054f\u054d\u054a \u0564\u0578\u0582\u0580\u057d \u0563\u0561\u043b">\u0434\u0435\u043d\u044c \u0434\u043e \u0432\u044b\u0445\u043e\u0434\u0430 \u0432 \u0422\u041e\u041f</div>
    </div>
    <div class="stat-card">
      <div class="stat-big" data-count-s="200">0+</div>
      <div class="stat-desc" data-ru="\u0432\u044b\u043a\u0443\u043f\u043e\u0432 \u043a\u0430\u0436\u0434\u044b\u0439 \u0434\u0435\u043d\u044c" data-am="\u0563\u0576\u0578\u0582\u0574 \u0561\u0574\u0565\u0576 \u0585\u0580">\u0432\u044b\u043a\u0443\u043f\u043e\u0432 \u043a\u0430\u0436\u0434\u044b\u0439 \u0434\u0435\u043d\u044c</div>
    </div>
  </div>
</div>
</div>

<!-- ===== ABOUT ===== -->
<section class="section" id="about">
<div class="container">
  <div class="about-grid fade-up">
    <div class="about-img">
      <img src="/static/img/team-new.jpg" alt="\u041a\u043e\u043c\u0430\u043d\u0434\u0430 Go to Top">
    </div>
    <div class="about-text">
      <div class="section-badge"><i class="fas fa-info-circle"></i> <span data-ru="\u041e \u043a\u043e\u043c\u043f\u0430\u043d\u0438\u0438" data-am="\u0538\u0576\u056f\u0565\u0580\u0578\u0582\u0569\u0575\u0561\u0576 \u0574\u0561\u057d\u056b\u0576">\u041e \u043a\u043e\u043c\u043f\u0430\u043d\u0438\u0438</span></div>
      <h2>\u0427\u0442\u043e \u0442\u0430\u043a\u043e\u0435 <span class="gr">Go to Top</span>?</h2>
      <p data-ru="\u00abGo to Top\u00bb \u2014 \u0441\u0435\u0440\u0432\u0438\u0441 \u0440\u0430\u0437\u0432\u0438\u0442\u0438\u044f \u0412\u0430\u0448\u0435\u0433\u043e \u0431\u0438\u0437\u043d\u0435\u0441\u0430 \u043d\u0430 \u043c\u0430\u0440\u043a\u0435\u0442\u043f\u043b\u0435\u0439\u0441\u0430\u0445 \u0441 \u043f\u043e\u043c\u043e\u0449\u044c\u044e \u043a\u043e\u043c\u043f\u043b\u0435\u043a\u0441\u043d\u043e\u0433\u043e \u043f\u0440\u043e\u0434\u0432\u0438\u0436\u0435\u043d\u0438\u044f \u0438 \u0443\u0441\u043b\u0443\u0433\u0438 \u0432\u044b\u043a\u0443\u043f\u043e\u0432 \u043f\u043e \u043a\u043b\u044e\u0447\u0435\u0432\u044b\u043c \u0441\u043b\u043e\u0432\u0430\u043c." data-am="\u00abGo to Top\u00bb \u2014 \u0571\u0565\u0580 \u0562\u056b\u0566\u0576\u0565\u057d\u056b \u0566\u0561\u0580\u0563\u0561\u0581\u0574\u0561\u0576 \u056e\u0561\u057c\u0561\u0575\u0578\u0582\u0569\u0575\u0578\u0582\u0576 \u0574\u0561\u0580\u056f\u0565\u057f\u057a\u056c\u0565\u0575\u057d\u0576\u0565\u0580\u0578\u0582\u0574\u055d \u0570\u0561\u0574\u0561\u057a\u0561\u0580\u0583\u0561\u056f \u0561\u057c\u0561\u057b\u056d\u0561\u0572\u0561\u0581\u0574\u0561\u0576 \u0587 \u0563\u0576\u0578\u0582\u0574\u0576\u0565\u0580\u056b \u056e\u0561\u057c\u0561\u0575\u0578\u0582\u0569\u0575\u0561\u0576 \u0574\u056b\u057b\u0578\u0581\u0578\u057e:">\u00abGo to Top\u00bb \u2014 \u0441\u0435\u0440\u0432\u0438\u0441 \u0440\u0430\u0437\u0432\u0438\u0442\u0438\u044f \u0412\u0430\u0448\u0435\u0433\u043e \u0431\u0438\u0437\u043d\u0435\u0441\u0430 \u043d\u0430 \u043c\u0430\u0440\u043a\u0435\u0442\u043f\u043b\u0435\u0439\u0441\u0430\u0445 \u0441 \u043f\u043e\u043c\u043e\u0449\u044c\u044e \u043a\u043e\u043c\u043f\u043b\u0435\u043a\u0441\u043d\u043e\u0433\u043e \u043f\u0440\u043e\u0434\u0432\u0438\u0436\u0435\u043d\u0438\u044f \u0438 \u0443\u0441\u043b\u0443\u0433\u0438 \u0432\u044b\u043a\u0443\u043f\u043e\u0432 \u043f\u043e \u043a\u043b\u044e\u0447\u0435\u0432\u044b\u043c \u0441\u043b\u043e\u0432\u0430\u043c.</p>
      <p data-ru="\u041d\u0430\u0448\u0430 \u043a\u043e\u043c\u0430\u043d\u0434\u0430 \u043f\u0440\u043e\u0444\u0435\u0441\u0441\u0438\u043e\u043d\u0430\u043b\u043e\u0432 \u0441 2021 \u0433\u043e\u0434\u0430 \u0440\u0430\u0431\u043e\u0442\u0430\u0435\u0442 \u043d\u0430 \u0440\u0435\u0437\u0443\u043b\u044c\u0442\u0430\u0442. \u0423 \u043d\u0430\u0441 \u0441\u043e\u0431\u0441\u0442\u0432\u0435\u043d\u043d\u044b\u0435 \u0441\u043a\u043b\u0430\u0434\u044b \u0438 \u043e\u0444\u0438\u0441\u044b \u0432 \u0415\u0440\u0435\u0432\u0430\u043d\u0435. \u0418\u0441\u043f\u043e\u043b\u044c\u0437\u0443\u0435\u043c \u0434\u043b\u044f \u0432\u044b\u043a\u0443\u043f\u043e\u0432 \u0412\u0430\u0448\u0435\u0433\u043e \u0442\u043e\u0432\u0430\u0440\u0430 \u0442\u043e\u043b\u044c\u043a\u043e \u0440\u0435\u0430\u043b\u044c\u043d\u044b\u0435 \u0430\u043a\u043a\u0430\u0443\u043d\u0442\u044b \u043b\u044e\u0434\u0435\u0439 \u0438 \u043f\u0440\u043e\u0438\u0437\u0432\u043e\u0434\u0438\u043c \u0432\u0441\u0451 \u0432\u0440\u0443\u0447\u043d\u0443\u044e." data-am="\u0544\u0565\u0580 \u0574\u0561\u057d\u0576\u0561\u0563\u0565\u057f\u0576\u0565\u0580\u056b \u0569\u056b\u0574\u0568 2021 \u0569\u057e\u0561\u056f\u0561\u0576\u056b\u0581 \u0561\u0577\u056d\u0561\u057f\u0578\u0582\u0574 \u0567 \u0561\u0580\u0564\u0575\u0578\u0582\u0576\u0584\u056b \u0570\u0561\u0574\u0561\u0580: \u0544\u0565\u0576\u0584 \u0578\u0582\u0576\u0565\u0576\u0584 \u057d\u0565\u0583\u0561\u056f\u0561\u0576 \u057a\u0561\u0570\u0565\u057d\u057f\u0576\u0565\u0580 \u0587 \u0563\u0580\u0561\u057d\u0565\u0576\u0575\u0561\u056f\u0576\u0565\u0580 \u0535\u0580\u0587\u0561\u0576\u0578\u0582\u0574: \u0533\u0576\u0578\u0582\u0574\u0576\u0565\u0580\u056b \u0570\u0561\u0574\u0561\u0580 \u0585\u0563\u057f\u0561\u0563\u0578\u0580\u056e\u0578\u0582\u0574 \u0565\u0576\u0584 \u0574\u056b\u0561\u0575\u0576 \u056b\u0580\u0561\u056f\u0561\u0576 \u0574\u0561\u0580\u0564\u056f\u0561\u0576\u0581 \u0570\u0561\u0577\u056b\u057e\u0576\u0565\u0580 \u0587 \u0561\u0574\u0565\u0576 \u056b\u0576\u0579 \u0561\u0576\u0578\u0582\u0574 \u0565\u0576\u0584 \u0571\u0565\u057c\u0584\u0578\u057e:">\u041d\u0430\u0448\u0430 \u043a\u043e\u043c\u0430\u043d\u0434\u0430 \u043f\u0440\u043e\u0444\u0435\u0441\u0441\u0438\u043e\u043d\u0430\u043b\u043e\u0432 \u0441 2021 \u0433\u043e\u0434\u0430 \u0440\u0430\u0431\u043e\u0442\u0430\u0435\u0442 \u043d\u0430 \u0440\u0435\u0437\u0443\u043b\u044c\u0442\u0430\u0442. \u0423 \u043d\u0430\u0441 \u0441\u043e\u0431\u0441\u0442\u0432\u0435\u043d\u043d\u044b\u0435 \u0441\u043a\u043b\u0430\u0434\u044b \u0438 \u043e\u0444\u0438\u0441\u044b \u0432 \u0415\u0440\u0435\u0432\u0430\u043d\u0435. \u0418\u0441\u043f\u043e\u043b\u044c\u0437\u0443\u0435\u043c \u0434\u043b\u044f \u0432\u044b\u043a\u0443\u043f\u043e\u0432 \u0412\u0430\u0448\u0435\u0433\u043e \u0442\u043e\u0432\u0430\u0440\u0430 \u0442\u043e\u043b\u044c\u043a\u043e \u0440\u0435\u0430\u043b\u044c\u043d\u044b\u0435 \u0430\u043a\u043a\u0430\u0443\u043d\u0442\u044b \u043b\u044e\u0434\u0435\u0439 \u0438 \u043f\u0440\u043e\u0438\u0437\u0432\u043e\u0434\u0438\u043c \u0432\u0441\u0451 \u0432\u0440\u0443\u0447\u043d\u0443\u044e.</p>
      <div class="about-highlight">
        <p data-ru="\u041d\u0430\u0438\u043b\u0443\u0447\u0448\u0438\u0439 \u0440\u0435\u0437\u0443\u043b\u044c\u0442\u0430\u0442 \u0412\u044b \u043f\u043e\u043b\u0443\u0447\u0438\u0442\u0435, \u0432\u043e\u0441\u043f\u043e\u043b\u044c\u0437\u043e\u0432\u0430\u0432\u0448\u0438\u0441\u044c \u043a\u043e\u043c\u043f\u043b\u0435\u043a\u0441\u043e\u043c \u043d\u0430\u0448\u0438\u0445 \u0443\u0441\u043b\u0443\u0433!" data-am="\u053c\u0561\u057e\u0561\u0563\u0578\u0582\u0575\u0576 \u0561\u0580\u0564\u0575\u0578\u0582\u0576\u0584\u0568 \u056f\u057d\u057f\u0561\u0576\u0561\u0584 \u0585\u0563\u057f\u057e\u0565\u056c\u0578\u057e \u0574\u0565\u0580 \u056e\u0561\u057c\u0561\u0575\u0578\u0582\u0569\u0575\u0578\u0582\u0576\u0576\u0565\u0580\u056b \u0583\u0561\u0569\u0565\u0569\u0568!"><i class="fas fa-bolt" style="margin-right:8px"></i>\u041d\u0430\u0438\u043b\u0443\u0447\u0448\u0438\u0439 \u0440\u0435\u0437\u0443\u043b\u044c\u0442\u0430\u0442 \u0412\u044b \u043f\u043e\u043b\u0443\u0447\u0438\u0442\u0435, \u0432\u043e\u0441\u043f\u043e\u043b\u044c\u0437\u043e\u0432\u0430\u0432\u0448\u0438\u0441\u044c \u043a\u043e\u043c\u043f\u043b\u0435\u043a\u0441\u043e\u043c \u043d\u0430\u0448\u0438\u0445 \u0443\u0441\u043b\u0443\u0433!</p>
      </div>
    </div>
  </div>
</div>
</section>
"""

content = content.replace(
    '<!-- ===== SERVICES ===== -->',
    wb_banner_html + '\n<!-- ===== SERVICES ===== -->'
)
print("WB Banner + Stats + About added")

# ============================================================
# STEP C: Add Buyout & Reviews detail sections after services, before calculator
# ============================================================
buyout_reviews_html = """
<!-- ===== BUYOUT DETAIL ===== -->
<section class="section">
<div class="container">
  <div class="buyout-detail fade-up">
    <div class="buyout-detail-header">
      <div class="section-badge"><i class="fas fa-shopping-bag"></i> <span data-ru="\u0423\u0441\u043b\u0443\u0433\u0430 \u0432\u044b\u043a\u0443\u043f\u0430" data-am="\u0533\u0576\u0578\u0582\u0574\u056b \u056e\u0561\u057c\u0561\u0575\u0578\u0582\u0569\u0575\u0578\u0582\u0576">\u0423\u0441\u043b\u0443\u0433\u0430 \u0432\u044b\u043a\u0443\u043f\u0430</span></div>
      <h2 data-ru="\u0427\u0442\u043e \u0432\u043a\u043b\u044e\u0447\u0430\u0435\u0442 \u0432 \u0441\u0435\u0431\u044f \u0443\u0441\u043b\u0443\u0433\u0430 \u0432\u044b\u043a\u0443\u043f\u0430" data-am="\u053b\u0576\u0579 \u0567 \u0576\u0565\u0580\u0561\u057c\u0578\u0582\u0574 \u0563\u0576\u0578\u0582\u0574\u056b \u056e\u0561\u057c\u0561\u0575\u0578\u0582\u0569\u0575\u0578\u0582\u0576\u0568">\u0427\u0442\u043e \u0432\u043a\u043b\u044e\u0447\u0430\u0435\u0442 \u0432 \u0441\u0435\u0431\u044f <span class="gr">\u0443\u0441\u043b\u0443\u0433\u0430 \u0432\u044b\u043a\u0443\u043f\u0430</span></h2>
      <p data-ru="\u0418\u043d\u0434\u0438\u0432\u0438\u0434\u0443\u0430\u043b\u044c\u043d\u044b\u0439 \u043f\u043e\u0434\u0445\u043e\u0434 \u043a \u043a\u0430\u0436\u0434\u043e\u043c\u0443 \u043a\u043b\u0438\u0435\u043d\u0442\u0443. \u0412\u044b\u043a\u0443\u043f\u044b \u0442\u043e\u043b\u044c\u043a\u043e \u043f\u043e \u043a\u043b\u044e\u0447\u0435\u0432\u044b\u043c \u0437\u0430\u043f\u0440\u043e\u0441\u0430\u043c, \u043a\u0430\u0436\u0434\u044b\u0439 \u0437\u0430\u043a\u0430\u0437 \u043e\u0444\u043e\u0440\u043c\u043b\u044f\u0435\u0442 \u0440\u0435\u0430\u043b\u044c\u043d\u044b\u0439 \u0447\u0435\u043b\u043e\u0432\u0435\u043a \u0432\u0440\u0443\u0447\u043d\u0443\u044e." data-am="\u0531\u0576\u0570\u0561\u057f\u0561\u056f\u0561\u0576 \u0574\u043e\u057f\u0565\u0581\u0578\u0582\u0574 \u0575\u0578\u0582\u0580\u0561\u0584\u0561\u0576\u0579\u0575\u0578\u0582\u0580 \u0570\u0561\u0573\u0561\u056d\u043e\u0580\u0564\u056b \u0570\u0561\u0574\u0561\u0580: \u0533\u0576\u0578\u0582\u0574\u0576\u0565\u0580 \u0574\u056b\u0561\u0575\u0576 \u0562\u0561\u0576\u0561\u043b\u056b \u0570\u0561\u0580\u0581\u0578\u0582\u0574\u0576\u0565\u0580\u0578\u057e, \u0575\u0578\u0582\u0580\u0561\u0584\u0561\u0576\u0579\u0575\u0578\u0582\u0580 \u057a\u0561\u057f\u057e\u0565\u0580 \u056f\u0561\u057f\u0561\u0580\u0578\u0582\u0574 \u0567 \u056b\u0580\u0561\u056f\u0561\u0576 \u0574\u0561\u0580\u0564 \u0571\u0565\u057c\u0584\u043e\u057e:">\u0418\u043d\u0434\u0438\u0432\u0438\u0434\u0443\u0430\u043b\u044c\u043d\u044b\u0439 \u043f\u043e\u0434\u0445\u043e\u0434 \u043a \u043a\u0430\u0436\u0434\u043e\u043c\u0443 \u043a\u043b\u0438\u0435\u043d\u0442\u0443. \u0412\u044b\u043a\u0443\u043f\u044b \u0442\u043e\u043b\u044c\u043a\u043e \u043f\u043e \u043a\u043b\u044e\u0447\u0435\u0432\u044b\u043c \u0437\u0430\u043f\u0440\u043e\u0441\u0430\u043c, \u043a\u0430\u0436\u0434\u044b\u0439 \u0437\u0430\u043a\u0430\u0437 \u043e\u0444\u043e\u0440\u043c\u043b\u044f\u0435\u0442 \u0440\u0435\u0430\u043b\u044c\u043d\u044b\u0439 \u0447\u0435\u043b\u043e\u0432\u0435\u043a \u0432\u0440\u0443\u0447\u043d\u0443\u044e.</p>
    </div>
    <div class="buyout-grid">
      <div class="buyout-card">
        <h4 data-ru="\u041f\u043e\u043b\u043d\u043e\u0435 \u0441\u043e\u043f\u0440\u043e\u0432\u043e\u0436\u0434\u0435\u043d\u0438\u0435" data-am="\u053c\u056b\u0561\u0580\u056a\u0565\u0584 \u0578\u0582\u0572\u0565\u056f\u0581\u0578\u0582\u0574">\u041f\u043e\u043b\u043d\u043e\u0435 \u0441\u043e\u043f\u0440\u043e\u0432\u043e\u0436\u0434\u0435\u043d\u0438\u0435</h4>
        <ul>
          <li data-ru="\u041a\u043e\u043d\u0441\u0443\u043b\u044c\u0442\u0430\u0446\u0438\u044f" data-am="\u053d\u0578\u0580\u0570\u0580\u0564\u0561\u057f\u057e\u0578\u0582\u0569\u0575\u0578\u0582\u0576">\u041a\u043e\u043d\u0441\u0443\u043b\u044c\u0442\u0430\u0446\u0438\u044f</li>
          <li data-ru="\u0421\u043e\u0437\u0434\u0430\u043d\u0438\u0435 \u0447\u0430\u0442\u0430 \u0441 \u043c\u0435\u043d\u0435\u0434\u0436\u0435\u0440\u043e\u043c" data-am="\u0544\u0565\u0576\u0565\u057b\u0565\u0580\u056b \u0570\u0565\u057f \u0579\u0561\u057f\u056b \u057d\u057f\u0565\u0572\u056e\u0578\u0582\u0574">\u0421\u043e\u0437\u0434\u0430\u043d\u0438\u0435 \u0447\u0430\u0442\u0430 \u0441 \u043c\u0435\u043d\u0435\u0434\u0436\u0435\u0440\u043e\u043c</li>
          <li data-ru="\u0421\u043e\u0433\u043b\u0430\u0441\u043e\u0432\u0430\u043d\u0438\u0435 \u043f\u043b\u0430\u043d\u0430 \u0432\u044b\u043a\u0443\u043f\u043e\u0432" data-am="\u0533\u0576\u0578\u0582\u0574\u0576\u0565\u0580\u056b \u057a\u043b\u0561\u0576\u056b \u0570\u0561\u0574\u0561\u0571\u0561\u0575\u0576\u0565\u0581\u0578\u0582\u0574">\u0421\u043e\u0433\u043b\u0430\u0441\u043e\u0432\u0430\u043d\u0438\u0435 \u043f\u043b\u0430\u043d\u0430 \u0432\u044b\u043a\u0443\u043f\u043e\u0432</li>
          <li data-ru="\u0412\u044b\u043a\u0443\u043f\u044b \u043f\u043e \u043a\u043b\u044e\u0447\u0435\u0432\u044b\u043c \u0437\u0430\u043f\u0440\u043e\u0441\u0430\u043c" data-am="\u0533\u0576\u0578\u0582\u0574\u0576\u0565\u0580 \u0562\u0561\u0576\u0561\u043b\u056b \u0570\u0561\u0580\u0581\u0578\u0582\u0574\u0576\u0565\u0580\u043e\u057e">\u0412\u044b\u043a\u0443\u043f\u044b \u043f\u043e \u043a\u043b\u044e\u0447\u0435\u0432\u044b\u043c \u0437\u0430\u043f\u0440\u043e\u0441\u0430\u043c</li>
          <li data-ru="\u0417\u0430\u0431\u043e\u0440 \u0442\u043e\u0432\u0430\u0440\u0430 \u0438\u0437 \u041f\u0412\u0417 \u043a\u0443\u0440\u044c\u0435\u0440\u0430\u043c\u0438" data-am="\u0531\u057a\u0440\u0561\u0576\u0584\u056b \u057e\u0565\u0580\u0581\u0576\u0578\u0582\u0574 \u054a\u054e\u0536-\u056b\u0581 \u057d\u0578\u0582\u0580\u0570\u0561\u0576\u0564\u0561\u056f\u0576\u0565\u0580\u0578\u057e">\u0417\u0430\u0431\u043e\u0440 \u0442\u043e\u0432\u0430\u0440\u0430 \u0438\u0437 \u041f\u0412\u0417 \u043a\u0443\u0440\u044c\u0435\u0440\u0430\u043c\u0438</li>
          <li data-ru="\u0412\u043e\u0437\u0432\u0440\u0430\u0442 \u043d\u0430 \u0441\u043a\u043b\u0430\u0434\u044b \u043c\u0430\u0440\u043a\u0435\u0442\u043f\u043b\u0435\u0439\u0441\u043e\u0432" data-am="\u054e\u0565\u0580\u0561\u0564\u0561\u0580\u0571 \u043c\u0561\u0580\u056f\u0565\u057f\u057a\u043b\u0565\u0575\u057d\u0576\u0565\u0580\u056b \u057a\u0561\u0570\u0565\u057d\u057f\u0576\u0565\u0580">\u0412\u043e\u0437\u0432\u0440\u0430\u0442 \u043d\u0430 \u0441\u043a\u043b\u0430\u0434\u044b \u043c\u0430\u0440\u043a\u0435\u0442\u043f\u043b\u0435\u0439\u0441\u043e\u0432</li>
          <li data-ru="\u041f\u0443\u0431\u043b\u0438\u043a\u0430\u0446\u0438\u044f \u043e\u0442\u0437\u044b\u0432\u043e\u0432" data-am="\u053f\u0561\u0580\u056e\u056b\u0584\u0576\u0565\u0580\u056b \u0570\u0440\u0561\u057a\u0561\u0580\u0561\u056f\u0578\u0582\u0574">\u041f\u0443\u0431\u043b\u0438\u043a\u0430\u0446\u0438\u044f \u043e\u0442\u0437\u044b\u0432\u043e\u0432</li>
        </ul>
      </div>
      <div class="buyout-card">
        <h4 data-ru="\u041e\u0442\u0447\u0451\u0442\u043d\u043e\u0441\u0442\u044c" data-am="\u0540\u0561\u0577\u057e\u0565\u057f\u057e\u0578\u0582\u0569\u0575\u0578\u0582\u0576">\u041e\u0442\u0447\u0451\u0442\u043d\u043e\u0441\u0442\u044c</h4>
        <p data-ru="\u0424\u043e\u0440\u043c\u0438\u0440\u043e\u0432\u0430\u043d\u0438\u0435 \u0438\u0442\u043e\u0433\u043e\u0432\u043e\u0439 \u043e\u0442\u0447\u0451\u0442\u043d\u043e\u0441\u0442\u0438 \u043f\u043e \u043a\u0430\u0436\u0434\u043e\u043c\u0443 \u0432\u044b\u043a\u0443\u043f\u0443. \u041f\u043e\u043b\u043d\u0430\u044f \u043f\u0440\u043e\u0437\u0440\u0430\u0447\u043d\u043e\u0441\u0442\u044c \u043d\u0430 \u043a\u0430\u0436\u0434\u043e\u043c \u044d\u0442\u0430\u043f\u0435." data-am="\u054e\u0565\u0580\u057b\u0576\u0561\u056f\u0561\u0576 \u0570\u0561\u0577\u057e\u0565\u057f\u057e\u0578\u0582\u0569\u0575\u0561\u0576 \u0571\u0587\u0561\u057e\u043e\u0580\u0578\u0582\u043c \u0575\u0578\u0582\u0580\u0561\u0584\u0561\u0576\u0579\u0575\u0578\u0582\u0580 \u0563\u0576\u0578\u0582\u0574\u056b \u0570\u0561\u0574\u0561\u0580: \u053c\u056b\u0561\u0580\u056a\u0565\u0584 \u0569\u0561\u0583\u0561\u0576\u0581\u056b\u056f\u0578\u0582\u0569\u0575\u0578\u0582\u0576 \u0575\u0578\u0582\u0580\u0561\u0584\u0561\u0576\u0579\u0575\u0578\u0582\u0580 \u0583\u0578\u0582\u043b\u0578\u0582\u043c:">\u0424\u043e\u0440\u043c\u0438\u0440\u043e\u0432\u0430\u043d\u0438\u0435 \u0438\u0442\u043e\u0433\u043e\u0432\u043e\u0439 \u043e\u0442\u0447\u0451\u0442\u043d\u043e\u0441\u0442\u0438 \u043f\u043e \u043a\u0430\u0436\u0434\u043e\u043c\u0443 \u0432\u044b\u043a\u0443\u043f\u0443. \u041f\u043e\u043b\u043d\u0430\u044f \u043f\u0440\u043e\u0437\u0440\u0430\u0447\u043d\u043e\u0441\u0442\u044c \u043d\u0430 \u043a\u0430\u0436\u0434\u043e\u043c \u044d\u0442\u0430\u043f\u0435.</p>
      </div>
      <div class="buyout-card">
        <h4 data-ru="\u041a\u043e\u043d\u0442\u0440\u043e\u043b\u044c" data-am="\u054e\u0565\u0580\u0561\u0570\u057d\u056f\u043e\u0572\u0578\u0582\u0569\u0575\u0578\u0582\u0576">\u041a\u043e\u043d\u0442\u0440\u043e\u043b\u044c</h4>
        <p data-ru="\u0421\u043e\u043f\u0440\u043e\u0432\u043e\u0436\u0434\u0435\u043d\u0438\u0435 \u0438 \u043a\u043e\u043d\u0442\u0440\u043e\u043b\u044c \u043d\u0430 \u0432\u0441\u0435\u0445 \u044d\u0442\u0430\u043f\u0430\u0445. \u0422\u043e\u0447\u043d\u043e\u0435 \u0441\u043b\u0435\u0434\u043e\u0432\u0430\u043d\u0438\u0435 \u0430\u043b\u0433\u043e\u0440\u0438\u0442\u043c\u0443 \u0434\u043b\u044f \u0431\u0435\u0437\u043e\u043f\u0430\u0441\u043d\u043e\u0441\u0442\u0438 \u0432\u0430\u0448\u0435\u0433\u043e \u043a\u0430\u0431\u0438\u043d\u0435\u0442\u0430." data-am="\u0548\u0582\u0572\u0565\u056f\u0581\u0578\u0582\u0574 \u0587 \u057e\u0565\u0580\u0561\u0570\u057d\u056f\u043e\u0572\u0578\u0582\u0569\u0575\u0578\u0582\u0576 \u0562\u043e\u043b\u043e\u0580 \u0583\u0578\u0582\u043b\u0565\u0580\u0578\u0582\u043c: \u0531\u043b\u0563\u043e\u0580\u056b\u0569\u043c\u056b \u0573\u056b\u0577\u057f \u0570\u0565\u057f\u0587\u0578\u0580\u043c\u0561\u043d \u0571\u0565\u0580 \u056f\u0561\u0562\u056b\u043d\u0565\u057f\u056b \u0561\u0576\u057e\u057f\u0561\u0576\u0563\u0578\u0582\u0569\u0575\u0561\u043d \u0570\u0561\u043c\u0561\u0580:">\u0421\u043e\u043f\u0440\u043e\u0432\u043e\u0436\u0434\u0435\u043d\u0438\u0435 \u0438 \u043a\u043e\u043d\u0442\u0440\u043e\u043b\u044c \u043d\u0430 \u0432\u0441\u0435\u0445 \u044d\u0442\u0430\u043f\u0430\u0445. \u0422\u043e\u0447\u043d\u043e\u0435 \u0441\u043b\u0435\u0434\u043e\u0432\u0430\u043d\u0438\u0435 \u0430\u043b\u0433\u043e\u0440\u0438\u0442\u043c\u0443 \u0434\u043b\u044f \u0431\u0435\u0437\u043e\u043f\u0430\u0441\u043d\u043e\u0441\u0442\u0438 \u0432\u0430\u0448\u0435\u0433\u043e \u043a\u0430\u0431\u0438\u043d\u0435\u0442\u0430.</p>
      </div>
    </div>
  </div>

  <!-- Reviews under ключ -->
  <div class="reviews-detail fade-up">
    <div class="buyout-detail-header">
      <div class="section-badge"><i class="fas fa-comments"></i> <span data-ru="\u041e\u0442\u0437\u044b\u0432\u044b \u043f\u043e\u0434 \u043a\u043b\u044e\u0447" data-am="\u053f\u0561\u0580\u056e\u056b\u0584\u0576\u0565\u0580 \u0561\u043c\u0562\u043e\u0572\u057b\u0561\u056f\u0561\u043d">\u041e\u0442\u0437\u044b\u0432\u044b \u043f\u043e\u0434 \u043a\u043b\u044e\u0447</span></div>
      <h2 data-ru="\u0427\u0442\u043e \u0432\u043a\u043b\u044e\u0447\u0430\u0435\u0442 \u0443\u0441\u043b\u0443\u0433\u0430 \u00ab\u043e\u0442\u0437\u044b\u0432\u044b \u043f\u043e\u0434 \u043a\u043b\u044e\u0447\u00bb" data-am="\u053b\u0576\u0579 \u0567 \u0576\u0565\u0580\u0561\u057c\u0578\u0582\u0574 \u00ab\u056f\u0561\u0580\u056e\u056b\u0584\u0576\u0565\u0580 \u0561\u043c\u0562\u043e\u0572\u057b\u0561\u056f\u0561\u043d\u00bb \u056e\u0561\u057c\u0561\u0575\u0578\u0582\u0569\u0575\u0578\u0582\u0576\u0568">\u0427\u0442\u043e \u0432\u043a\u043b\u044e\u0447\u0430\u0435\u0442 \u0443\u0441\u043b\u0443\u0433\u0430 <span class="gr">\u00ab\u043e\u0442\u0437\u044b\u0432\u044b \u043f\u043e\u0434 \u043a\u043b\u044e\u0447\u00bb</span></h2>
      <p data-ru="\u0420\u0435\u0439\u0442\u0438\u043d\u0433 \u043a\u0430\u0440\u0442\u043e\u0447\u043a\u0438 \u0441\u0442\u0430\u043d\u0435\u0442 \u043c\u0430\u043a\u0441\u0438\u043c\u0430\u043b\u044c\u043d\u044b\u043c. \u0412\u0430\u0448\u0438 \u043a\u043b\u0438\u0435\u043d\u0442\u044b \u0431\u0443\u0434\u0443\u0442 \u0434\u043e\u0432\u0435\u0440\u044f\u0442\u044c \u0412\u0430\u043c \u0438 \u0447\u0430\u0449\u0435 \u0437\u0430\u043a\u0430\u0437\u044b\u0432\u0430\u0442\u044c." data-am="\u0554\u0561\u0580\u057f\u056b \u057e\u0561\u0580\u056f\u0561\u0576\u056b\u0577\u0568 \u056f\u0564\u0561\u057c\u0576\u0561 \u0561\u0574\u0565\u0576\u0561\u0562\u0561\u0580\u0571\u0580: \u0541\u0565\u0580 \u0570\u0561\u0573\u0561\u056d\u043e\u0580\u0564\u0576\u0565\u0580\u0568 \u056f\u057e\u057d\u057f\u0561\u0570\u0565\u0576 \u0571\u0565\u0566 \u0587 \u056f\u057a\u0561\u057f\u057e\u056b\u0580\u0565\u0576 \u0561\u057e\u0565\u043b\u056b \u0570\u0561\u0573\u0561\u056d:">\u0420\u0435\u0439\u0442\u0438\u043d\u0433 \u043a\u0430\u0440\u0442\u043e\u0447\u043a\u0438 \u0441\u0442\u0430\u043d\u0435\u0442 \u043c\u0430\u043a\u0441\u0438\u043c\u0430\u043b\u044c\u043d\u044b\u043c. \u0412\u0430\u0448\u0438 \u043a\u043b\u0438\u0435\u043d\u0442\u044b \u0431\u0443\u0434\u0443\u0442 \u0434\u043e\u0432\u0435\u0440\u044f\u0442\u044c \u0412\u0430\u043c \u0438 \u0447\u0430\u0449\u0435 \u0437\u0430\u043a\u0430\u0437\u044b\u0432\u0430\u0442\u044c.</p>
    </div>
    <div class="reviews-grid">
      <div class="review-point">
        <i class="fas fa-pen-fancy"></i>
        <h4 data-ru="\u041d\u0430\u043f\u0438\u0441\u0430\u043d\u0438\u0435 \u0442\u0435\u043a\u0441\u0442\u0430" data-am="\u054f\u0565\u0584\u057d\u057f\u056b \u0563\u0580\u0578\u0582\u043c">\u041d\u0430\u043f\u0438\u0441\u0430\u043d\u0438\u0435 \u0442\u0435\u043a\u0441\u0442\u0430</h4>
        <p data-ru="\u041e\u043f\u0438\u0441\u0430\u043d\u0438\u0435 \u0432\u0441\u0435\u0445 \u0434\u043e\u0441\u0442\u043e\u0438\u043d\u0441\u0442\u0432 \u0442\u043e\u0432\u0430\u0440\u0430" data-am="\u0531\u057a\u0580\u0561\u0576\u0584\u056b \u0562\u043e\u043b\u043e\u0580 \u0561\u057c\u0561\u057e\u0565\u043b\u0578\u0582\u0569\u0575\u0578\u0582\u0576\u0576\u0565\u0580\u056b \u0576\u056f\u0561\u0580\u0561\u0563\u0580\u043e\u0582\u043c">\u041e\u043f\u0438\u0441\u0430\u043d\u0438\u0435 \u0432\u0441\u0435\u0445 \u0434\u043e\u0441\u0442\u043e\u0438\u043d\u0441\u0442\u0432 \u0442\u043e\u0432\u0430\u0440\u0430</p>
      </div>
      <div class="review-point">
        <i class="fas fa-camera-retro"></i>
        <h4 data-ru="\u0424\u043e\u0442\u043e \u0438 \u0432\u0438\u0434\u0435\u043e" data-am="\u053c\u0578\u0582\u057d\u0561\u0576\u056f\u0561\u0580 \u0587 \u057f\u0565\u057d\u0561\u0576\u0575\u0578\u0582\u0569">\u0424\u043e\u0442\u043e \u0438 \u0432\u0438\u0434\u0565\u043e</h4>
        <p data-ru="\u041f\u043e\u043a\u0430\u0437\u044b\u0432\u0430\u0435\u043c \u0432\u0441\u0435 \u043f\u043b\u044e\u0441\u044b \u0412\u0430\u0448\u0435\u0433\u043e \u0442\u043e\u0432\u0430\u0440\u0430 \u0432 \u0440\u0430\u0437\u043d\u044b\u0445 \u043b\u043e\u043a\u0430\u0446\u0438\u044f\u0445" data-am="\u0551\u0578\u0582\u0575\u0581 \u0565\u0576\u0584 \u057f\u0561\u043b\u056b\u057d \u0571\u0565\u0580 \u0561\u057a\u0440\u0561\u0576\u0584\u056b \u0562\u043e\u043b\u043e\u0580 \u0561\u057c\u0561\u057e\u0565\u043b\u0578\u0582\u0569\u0575\u0578\u0582\u0576\u0576\u0565\u0580\u0568 \u057f\u0561\u0580\u0562\u0565\u0580 \u057e\u0561\u0575\u0580\u0565\u0580\u0578\u0582\u043c">\u041f\u043e\u043a\u0430\u0437\u044b\u0432\u0430\u0435\u043c \u0432\u0441\u0435 \u043f\u043b\u044e\u0441\u044b \u0412\u0430\u0448\u0435\u0433\u043e \u0442\u043e\u0432\u0430\u0440\u0430 \u0432 \u0440\u0430\u0437\u043d\u044b\u0445 \u043b\u043e\u043a\u0430\u0446\u0438\u044f\u0445</p>
      </div>
      <div class="review-point">
        <i class="fas fa-map-marked-alt"></i>
        <h4 data-ru="\u0420\u0430\u0437\u043d\u044b\u0435 \u043b\u043e\u043a\u0430\u0446\u0438\u0438" data-am="\u054f\u0561\u0580\u0562\u0565\u0580 \u057e\u0561\u0575\u0580\u0565\u0580">\u0420\u0430\u0437\u043d\u044b\u0435 \u043b\u043e\u043a\u0430\u0446\u0438\u0438</h4>
        <p data-ru="\u041f\u0412\u0417, \u043a\u0430\u0444\u0435, \u043f\u0440\u0438\u0440\u043e\u0434\u0430, \u0434\u043e\u043c\u0430\u0448\u043d\u0438\u0439 \u0438\u043d\u0442\u0435\u0440\u044c\u0435\u0440, \u043f\u0440\u0435\u0434\u043c\u0435\u0442\u043d\u044b\u0435 \u0444\u043e\u0442\u043e" data-am="\u054a\u054e\u0536, \u057d\u0580\u0573\u0561\u0580\u0561\u0576, \u0562\u0576\u0578\u0582\u0569\u0575\u0578\u0582\u0576, \u057f\u0576\u0561\u0575\u056b\u0576 \u056b\u0576\u057f\u0565\u0580\u056b\u0565\u0580, \u0561\u057c\u0561\u0580\u056f\u0561\u0575\u0561\u056f\u0561\u043d \u043b\u0578\u0582\u057d\u0561\u0576\u056f\u0561\u0580\u0576\u0565\u0580">\u041f\u0412\u0417, \u043a\u0430\u0444\u0435, \u043f\u0440\u0438\u0440\u043e\u0434\u0430, \u0434\u043e\u043c\u0430\u0448\u043d\u0438\u0439 \u0438\u043d\u0442\u0435\u0440\u044c\u0435\u0440, \u043f\u0440\u0435\u0434\u043c\u0435\u0442\u043d\u044b\u0435 \u0444\u043e\u0442\u043e</p>
      </div>
      <div class="review-point">
        <i class="fas fa-user-friends"></i>
        <h4 data-ru="\u0420\u0435\u0430\u043b\u044c\u043d\u044b\u0435 \u0430\u043a\u043a\u0430\u0443\u043d\u0442\u044b" data-am="\u053b\u0580\u0561\u056f\u0561\u043d \u0570\u0561\u0577\u056b\u057e\u043d\u0565\u0580">\u0420\u0435\u0430\u043b\u044c\u043d\u044b\u0435 \u0430\u043a\u043a\u0430\u0443\u043d\u0442\u044b</h4>
        <p data-ru="\u0412\u0441\u0435 \u043e\u0442\u0437\u044b\u0432\u044b \u043f\u0443\u0431\u043b\u0438\u043a\u0443\u044e\u0442\u0441\u044f \u0441 \u0440\u0435\u0430\u043b\u044c\u043d\u044b\u0445 \u0430\u043a\u043a\u0430\u0443\u043d\u0442\u043e\u0432 \u0441 \u0438\u0441\u0442\u043e\u0440\u0438\u0435\u0439" data-am="\u0532\u043e\u043b\u043e\u0580 \u056f\u0561\u0580\u056e\u056b\u0584\u0576\u0565\u0580\u0568 \u0570\u0580\u0561\u057a\u0561\u0580\u0561\u056f\u057e\u0578\u0582\u043c \u0565\u0576 \u056b\u0580\u0561\u056f\u0561\u043d \u0570\u0561\u0577\u056b\u057e\u0576\u0565\u0580\u056b\u0581 \u057a\u0561\u057f\u043c\u0578\u0582\u0569\u0575\u0561\u043d\u0562">\u0412\u0441\u0435 \u043e\u0442\u0437\u044b\u0432\u044b \u043f\u0443\u0431\u043b\u0438\u043a\u0443\u044e\u0442\u0441\u044f \u0441 \u0440\u0435\u0430\u043b\u044c\u043d\u044b\u0445 \u0430\u043a\u043a\u0430\u0443\u043d\u0442\u043e\u0432 \u0441 \u0438\u0441\u0442\u043e\u0440\u0438\u0435\u0439</p>
      </div>
    </div>
  </div>
</div>
</section>
"""

content = content.replace(
    '<!-- ===== CALCULATOR ===== -->',
    buyout_reviews_html + '\n<!-- ===== CALCULATOR ===== -->'
)
print("Buyout + Reviews detail sections added")

# ============================================================
# STEP D: Update guarantee block - remove image, update text
# ============================================================
old_guarantee = '''  <div class="guarantee-card fade-up">
    <div>
      <img src="/static/img/team-new.jpg" alt="\u041a\u043e\u043c\u0430\u043d\u0434\u0430 Go to Top">
    </div>
    <div>
      <div class="section-badge"><i class="fas fa-shield-alt"></i> <span data-ru="\u0413\u0430\u0440\u0430\u043d\u0442\u0438\u044f \u0431\u0435\u0437\u043e\u043f\u0430\u0441\u043d\u043e\u0441\u0442\u0438" data-am="\u0531\u0576\u057e\u057f\u0561\u043d\u0563\u0578\u0582\u0569\u0575\u0561\u043d \u0565\u0580\u0561\u0577\u056d\u056b\u0584">\u0413\u0430\u0440\u0430\u043d\u0442\u0438\u044f \u0431\u0435\u0437\u043e\u043f\u0430\u0441\u043d\u043e\u0441\u0442\u0438</span></div>
      <h2 data-ru="\u041a\u043e\u043c\u0430\u043d\u0434\u0430 \u043f\u0440\u043e\u0444\u0435\u0441\u0441\u0438\u043e\u043d\u0430\u043b\u043e\u0432 \u043d\u0430 \u0432\u0430\u0448\u0435\u0439 \u0441\u0442\u043e\u0440\u043e\u043d\u0435" data-am="\u0544\u0561\u057d\u0576\u0561\u0563\u0565\u057f\u0576\u0565\u0580\u056b \u0569\u056b\u043c\u0568 \u0571\u0565\u0580 \u056f\u043e\u0572\u0584\u056b\u043d">\u041a\u043e\u043c\u0430\u043d\u0434\u0430 \u043f\u0440\u043e\u0444\u0435\u0441\u0441\u0438\u043e\u043d\u0430\u043b\u043e\u0432 \u043d\u0430 \u0432\u0430\u0448\u0435\u0439 \u0441\u0442\u043e\u0440\u043e\u043d\u0435</h2>'''

new_guarantee = '''  <div class="guarantee-card fade-up">
    <div>
      <div class="section-badge"><i class="fas fa-shield-alt"></i> <span data-ru="\u0413\u0430\u0440\u0430\u043d\u0442\u0438\u044f \u0431\u0435\u0437\u043e\u043f\u0430\u0441\u043d\u043e\u0441\u0442\u0438" data-am="\u0531\u0576\u057e\u057f\u0561\u0576\u0563\u0578\u0582\u0569\u0575\u0561\u0576 \u0565\u0580\u0561\u0577\u056d\u056b\u0584">\u0413\u0430\u0440\u0430\u043d\u0442\u0438\u044f \u0431\u0435\u0437\u043e\u043f\u0430\u0441\u043d\u043e\u0441\u0442\u0438</span></div>
      <h2 data-ru="\u0412\u0441\u0451 \u043e\u0440\u0433\u0430\u043d\u0438\u0437\u043e\u0432\u0430\u043d\u043e \u0438 \u043f\u043e \u043f\u043e\u043b\u043e\u0447\u043a\u0430\u043c. \u041d\u0430\u0448\u0430 \u043a\u043e\u043c\u0430\u043d\u0434\u0430" data-am="\u0531\u0574\u0565\u043d \u056b\u043d\u0579 \u056f\u0561\u0566\u043c\u0561\u056f\u0565\u0580\u057a\u057e\u0561\u056e \u0567 \u0587 \u056f\u0561\u0580\u0563\u0561\u057e\u043e\u0580\u057e\u0561\u056e. \u0544\u0565\u0580 \u0569\u056b\u043c\u0568">\u0412\u0441\u0451 \u043e\u0440\u0433\u0430\u043d\u0438\u0437\u043e\u0432\u0430\u043d\u043e \u0438 \u043f\u043e \u043f\u043e\u043b\u043e\u0447\u043a\u0430\u043c. \u041d\u0430\u0448\u0430 \u043a\u043e\u043c\u0430\u043d\u0434\u0430</h2>'''

if old_guarantee in content:
    content = content.replace(old_guarantee, new_guarantee)
    print("Guarantee block updated")
else:
    # Try to find it with regex
    guarantee_pattern = r'(<div class="guarantee-card fade-up">)\s*<div>\s*<img[^>]*team-new\.jpg[^>]*>\s*</div>\s*<div>\s*(<div class="section-badge">.*?</div>)\s*<h2[^>]*>[^<]*</h2>'
    match = re.search(guarantee_pattern, content, re.DOTALL)
    if match:
        old_block = match.group(0)
        content = content.replace(old_block, new_guarantee)
        print("Guarantee block updated (regex)")
    else:
        print("WARNING: Could not find guarantee block to update")

# ============================================================
# STEP E: Update popup to competitor style
# ============================================================
old_popup_form_start = '<div id="popupFormWrap">'
old_popup_icon = '<div class="popup-icon"><i class="fas fa-calculator"></i></div>'
new_popup_icon = '<div class="popup-icon"><i class="fas fa-chart-line"></i></div>'
content = content.replace(old_popup_icon, new_popup_icon)

# Update popup heading
content = content.replace(
    'data-ru="\u041f\u043e\u043b\u0443\u0447\u0438\u0442\u0435 \u0431\u0435\u0441\u043f\u043b\u0430\u0442\u043d\u044b\u0439 \u0440\u0430\u0441\u0447\u0451\u0442!" data-am="\u054d\u057f\u0561\u0581\u0565\u0584 \u0561\u0576\u057e\u0573\u0561\u0580 \u0570\u0561\u0577\u057e\u0561\u0580\u056f!">\u041f\u043e\u043b\u0443\u0447\u0438\u0442\u0435 \u0431\u0435\u0441\u043f\u043b\u0430\u0442\u043d\u044b\u0439 \u0440\u0430\u0441\u0447\u0451\u0442!',
    'data-ru="\u041f\u043e\u0432\u044b\u0441\u044c \u0440\u0435\u0439\u0442\u0438\u043d\u0433 \u043c\u0430\u0433\u0430\u0437\u0438\u043d\u0430 \u043f\u0440\u044f\u043c\u043e \u0441\u0435\u0439\u0447\u0430\u0441!" data-am="\u0532\u0561\u0580\u0571\u0580\u0561\u0581\u0580\u0565\u0584 \u056d\u0561\u0576\u0578\u0582\u0569\u056b \u057e\u0561\u0580\u056f\u0561\u0576\u056b\u0577\u0568 \u0570\u056b\u0574\u0561!">\u041f\u043e\u0432\u044b\u0441\u044c \u0440\u0435\u0439\u0442\u0438\u043d\u0433 \u043c\u0430\u0433\u0430\u0437\u0438\u043d\u0430 \u043f\u0440\u044f\u043c\u043e \u0441\u0435\u0439\u0447\u0430\u0441!'
)
print("Popup heading updated")

# Update popup subtitle
content = content.replace(
    'data-ru="\u041f\u0435\u0440\u0441\u043e\u043d\u0430\u043b\u044c\u043d\u044b\u0439 \u043c\u0435\u043d\u0435\u0434\u0436\u0435\u0440 \u0441\u0432\u044f\u0436\u0435\u0442\u0441\u044f \u0441 \u0432\u0430\u043c\u0438 \u0438 \u043f\u043e\u0434\u0433\u043e\u0442\u043e\u0432\u0438\u0442 \u0438\u043d\u0434\u0438\u0432\u0438\u0434\u0443\u0430\u043b\u044c\u043d\u044b\u0439 \u0440\u0430\u0441\u0447\u0451\u0442"',
    'data-ru="\u0412\u044b\u043a\u0443\u043f\u044b \u0436\u0438\u0432\u044b\u043c\u0438 \u043b\u044e\u0434\u044c\u043c\u0438, \u043e\u0442\u0437\u044b\u0432\u044b \u0441 \u0444\u043e\u0442\u043e, \u043f\u0440\u043e\u0444\u0435\u0441\u0441\u0438\u043e\u043d\u0430\u043b\u044c\u043d\u044b\u0435 \u0444\u043e\u0442\u043e\u0441\u0435\u0441\u0441\u0438\u0438. \u0423\u0437\u043d\u0430\u0439\u0442\u0435 \u0441\u043a\u043e\u043b\u044c\u043a\u043e \u044d\u0442\u043e \u0441\u0442\u043e\u0438\u0442!"'
)
print("Popup subtitle updated")

# ============================================================
# STEP F: Add stats animation for new stats bar
# ============================================================
# Add to the counter animation section
old_counter_selector = "document.querySelectorAll('.stat-num[data-count]').forEach"
new_counter_code = """document.querySelectorAll('.stat-num[data-count]').forEach(function(el) { cObs.observe(el); });

/* Stats bar counter animation */
var sObs = new IntersectionObserver(function(entries) {
  entries.forEach(function(entry) {
    if (entry.isIntersecting) {
      var el = entry.target;
      var target = parseInt(el.dataset.countS);
      var dur = 2000; var start = performance.now();
      function animS(now) {
        var p = Math.min((now - start) / dur, 1);
        var val = Math.floor(target * (1 - Math.pow(1 - p, 3)));
        el.textContent = val.toLocaleString('ru-RU') + (el.textContent.includes('+') ? '+' : '');
        if (p < 1) requestAnimationFrame(animS);
        else el.textContent = target.toLocaleString('ru-RU') + (target > 100 ? '+' : '');
      }
      requestAnimationFrame(animS); sObs.unobserve(el);
    }
  });
}, {threshold:0.5});
document.querySelectorAll('.stat-big[data-count-s]').forEach"""

content = content.replace(
    old_counter_selector,
    new_counter_code
)
print("Stats animation added")

# ============================================================
# STEP G: Update version
# ============================================================
content = content.replace(
    "console.log('Go to Top \u2014 site loaded v4');",
    "console.log('Go to Top \u2014 site loaded v5 - competitor blocks added');"
)

with open('src/index.tsx', 'w', encoding='utf-8') as f:
    f.write(content)

print("\n=== ALL UPDATES COMPLETE ===")
print(f"File size: {len(content)} chars")
